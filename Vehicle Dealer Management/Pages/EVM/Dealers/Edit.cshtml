@page
@model Vehicle_Dealer_Management.Pages.EVM.Dealers.EditModel
@{
    ViewData["Title"] = "Chỉnh sửa đại lý";
    ViewData["UserRole"] = "EVM_STAFF";
    ViewData["UserName"] = HttpContext.Session.GetString("UserName") ?? "EVM Staff";
}

<div class="content-header">
    <div class="flex justify-between items-center">
        <div>
            <h1 class="content-title">Chỉnh sửa đại lý</h1>
            <p class="content-subtitle">Cập nhật thông tin đại lý</p>
        </div>
        <a href="/EVM/Dealers" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Quay lại
        </a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        @if (!string.IsNullOrEmpty(Model.ErrorMessage))
        {
            <div class="alert alert-error" style="margin-bottom: 1.5rem;">
                <i class="bi bi-exclamation-triangle"></i> @Model.ErrorMessage
            </div>
        }

        @if (Model.Dealer != null)
        {
            <form method="post">
                <input type="hidden" name="id" value="@Model.Dealer.Id" />
                
                <div class="form-group">
                    <label class="form-label">Tên đại lý *</label>
                    <input type="text" class="form-control" name="name" value="@Model.Dealer.Name" required />
                </div>

                <div class="form-group">
                    <label class="form-label">Mã đại lý</label>
                    <input type="text" class="form-control" value="@Model.Dealer.Code" readonly style="background: var(--black); cursor: not-allowed;" />
                    <small class="form-text">Mã đại lý không thể thay đổi</small>
                </div>

                <div class="form-group">
                    <label class="form-label">Địa chỉ *</label>
                    <textarea class="form-control" name="address" rows="3" required>@Model.Dealer.Address</textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Số điện thoại</label>
                    <input type="text" class="form-control" name="phoneNumber" value="@Model.Dealer.PhoneNumber" />
                </div>

                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" name="email" value="@Model.Dealer.Email" />
                </div>

                <div class="form-group">
                    <label class="form-label">Trạng thái *</label>
                    <select class="form-control" name="status" required>
                        <option value="ACTIVE" selected="@(Model.Dealer.Status == "ACTIVE")">Hoạt động</option>
                        <option value="INACTIVE" selected="@(Model.Dealer.Status == "INACTIVE")">Tạm ngưng</option>
                        <option value="SUSPENDED" selected="@(Model.Dealer.Status == "SUSPENDED")">Đình chỉ</option>
                    </select>
                </div>

                <div class="flex gap-2">
                    <button type="submit" class="btn btn-primary">Cập nhật</button>
                    <a href="/EVM/Dealers" class="btn btn-secondary">Hủy</a>
                </div>
            </form>
        }
    </div>
</div>

